<UserControl
    x:Class="OwlCore.Uno.Controls.ContentOverlay"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Visibility="Collapsed">

    <UserControl.Resources>
        <Storyboard x:Name="ShowAnimation">
            <DoubleAnimation Duration="0:0:0.3" To="1" From="0"
                             Storyboard.TargetName="BackgroundFill" Storyboard.TargetProperty="Opacity">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.3" To="1" From="0"
                             Storyboard.TargetName="ContentTransform" Storyboard.TargetProperty="ScaleX">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.3" To="1" From="0"
                             Storyboard.TargetName="ContentTransform" Storyboard.TargetProperty="ScaleY">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.1" BeginTime="0:0:0.2" To="1" From="0"
                             Storyboard.TargetName="Content" Storyboard.TargetProperty="Opacity">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Name="HideAnimation" Completed="HideAnimation_Completed">
            <DoubleAnimation Duration="0:0:0.3" To="0" From="1"
                             Storyboard.TargetName="BackgroundFill" Storyboard.TargetProperty="Opacity">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.3" To="0" From="1"
                             Storyboard.TargetName="ContentTransform" Storyboard.TargetProperty="ScaleX">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.3" To="0" From="1"
                             Storyboard.TargetName="ContentTransform" Storyboard.TargetProperty="ScaleY">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:0.1" To="0" From="1"
                             Storyboard.TargetName="Content" Storyboard.TargetProperty="Opacity">
                <DoubleAnimation.EasingFunction>
                    <CircleEase/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </UserControl.Resources>
    
    <Grid>
        <Rectangle x:Name="BackgroundFill"
                   Fill="{ThemeResource SystemControlAcrylicElementBrush}"
                   Tapped="Background_OnTapped"/>

        <Grid x:Name="Content" Margin="50 40 50 35" HorizontalAlignment="Center" VerticalAlignment="Center" RenderTransformOrigin="0.5,0.5">
            <Grid.RenderTransform>
                <CompositeTransform x:Name="ContentTransform" ScaleX="1" ScaleY="1"/>
            </Grid.RenderTransform>
            <Grid.ColumnDefinitions>
                <ColumnDefinition  Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>

            <TextBlock x:Name="HeaderText"
                       Margin="5,0,0,5"
                       FontSize="24" />

            <Button Click="CloseButton_OnClick"
                    Background="Transparent"
                    Grid.Row="0" Grid.Column="1"
                    Margin="0,0,0,5"
                    Content="&#xE106;"
                    FontFamily="Segoe MDL2 Assets" FontSize="18"
                    Padding="7"
                    HorizontalAlignment="Right" />

            <ContentPresenter x:Name="Presenter" CornerRadius="4" Margin="0,0,0,0" Padding="10,15,10,25"
                              Grid.Row="1" Grid.ColumnSpan="2" Grid.Column="0"
                              VerticalAlignment="Center" HorizontalAlignment="Center"
                              Background="{ThemeResource SystemControlBackgroundChromeBlackMediumBrush}" />

        </Grid>
    </Grid>
</UserControl>
